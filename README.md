# wetube
## Wetube Clone built using NodeJS, Express, Mongo and ES6ğŸŒˆğŸ§šğŸ»â€â™€ï¸

---
&nbsp;
## â€¢ json

â€£ jsonì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ íŒŒì¼ì— ì •ë³´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ë§Œë“  ë°©ì‹ ì¤‘ í•˜ë‚˜ì´ë‹¤. 
(= node.jsì˜ ì •ë³´ ì €ì¥)  
â€£ nodeJSì˜ json ì´ë¦„ì€ ë¬´ì¡°ê±´ package.jsonì´ë‹¤.  
â†’ package.jsonì€ ê·¸ëƒ¥ í…ìŠ¤íŠ¸ íŒŒì¼ì´ë¯€ë¡œ ìˆ˜ì •í•´ë„ ê´œì°®ìŒ
â€£ npm ië¥¼ ì‹¤í–‰í•  ë•ŒëŠ” package.jsonì„ ë‹«ê³  ì‹¤í–‰í•˜ëŠ” ê±¸ ê¶Œì¥í•œë‹¤.  
(npmì´ ìë™ìœ¼ë¡œ package.jsonì„ ìˆ˜ì •í•´ì„œ ì—ëŸ¬ê°€ ë‚  ìˆ˜ë„)

â€¢ main : í”„ë¡œì íŠ¸ì˜ ëŒ€í‘œ íŒŒì¼ì´ ë¬´ì—‡ì¸ì§€ ì•Œë ¤ì£¼ëŠ” ê²ƒ  
â€¢ scripts : ì‹¤í–‰í•˜ê³  ì‹¶ì€ ê²ƒ  
â€¢ dependencies : ë‚´ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì ìœ¼ë¡œ ìˆì–´ì•¼ í•˜ëŠ” ê²ƒ  
â€¢ devDependencies : dependenciesëŠ” í”„ë¡œì íŠ¸ë¥¼ ìœ„í•œ ê±°ë¼ë©´ devDependenciesëŠ” ê°œë°œìë¥¼ ìœ„í•œ ê²ƒ  
(ê°œë°œì„ ë” í¸ë¦¬í•˜ê²Œ í•˜ê¸° ìœ„í•œ)

## â€¢ node_modules  
â€£ npmìœ¼ë¡œ ì„¤ì¹˜í•œ ëª¨ë“  íŒ¨í‚¤ì§€ê°€ ì €ì¥ë˜ëŠ” ê³³ì´ë‹¤. 

## â€¢ package-lock.json
â€£ íŒ¨í‚¤ì§€ê°€ ìˆ˜ì •ëëŠ”ì§€ í•´ì‹œê°’ìœ¼ë¡œ ì²´í¬í•´ì£¼ê³  ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•´ì¤€ë‹¤.

â€£ node_modules ê³¼ package-lock.json ì§€ìš°ê³  npm i ì‹¤í–‰í•˜ë©´ ë‹¤ì‹œ ì„¤ì¹˜ë˜ë‹ˆ ì§€ì›Œì ¸ë„ ê±±ì • ë†‰!

## â€¢ babel  
â€£ ìš°ë¦¬ê°€ ì‘ì„±í•œ ìµœì‹  ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ëª¨ë‘ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì•ˆì •ëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ë¡œ ë°”ê¿”ì¤€ë‹¤. 

## â€¢ babel.config.json  
â€£ preset : babelì„ ìœ„í•œ ì—„ì²­ ê±°ëŒ€í•œ í”ŒëŸ¬ê·¸ì¸  
â†’ ê°€ì¥ ìœ ëª…í•œ ê±´ preset-env : ìµœì‹  ìë°”ìŠ¤í¬ë¦½íŠ¸ êµ¬ë¬¸ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ

## â€¢ server
â€£ 24ì‹œê°„ ë‚´ë‚´ ì˜¨ë¼ì¸ì— ì—°ê²°ëœ ì»´í“¨í„°ë¼ í•  ìˆ˜ ìˆìŒ!  
â€£ í•­ìƒ ìš°ë¦¬ë¥¼ listeningí•˜ê³  ìˆì–´ì•¼ í•œë‹¤.  

## â€¢ callback  
â€£ ì„œë²„ê°€ ì‹œì‘ë  ë•Œ ì‘ë™í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.  
â€£ callback ì‘ì„±í•˜ê¸° ì „ì— ì„œë²„ì—ê²Œ ì–´ë–¤ í¬íŠ¸ë¥¼ listeningí• ì§€ ì–˜ê¸°í•´ ì¤˜ì•¼ í•œë‹¤.

## â€¢ GET 
â€£ HTTP method

## â€¢ http request
â€£ ì›¹ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ê³  ì„œë²„ì— ì •ë³´ë¥¼ ë³´ë‚´ëŠ” ë°©ë²•ì´ë‹¤.

## â€¢ middleware  
â€£ ì¤‘ê°„ì— ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´  
â€£ middlewareëŠ” requestì™€ response ì‚¬ì´ì— ì¡´ì¬í•œë‹¤.  
(= ë¸Œë¼ìš°ì €ê°€ requestí•œ ë‹¤ìŒ, ì‘ë‹µí•˜ê¸° ì „)  
â€£ ëª¨ë“  controllerëŠ” middleware  
â€£ í•˜ë‚˜ì˜ urlì—ë§Œ ì“¸ ìˆ˜ë„ ìˆê³  ëª¨ë“  urlì— ì“¸ ìˆ˜ë„ ìˆë‹¤.

## â€¢ app.use  
â€£ global middlewareë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.  
  (ì–´ëŠ URLì—ì„œë„ ì‘ë™í•˜ëŠ” middleware)  
â€£ app.use ê°€ app.getë³´ë‹¤ ë’¤ì— ì˜¤ë©´ middlewareê°€ ì‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.  
â€£ app.useë¥¼ ìœ„ì—ë‹¤ ë‘ë©´ ëª¨ë“  routeì— ì ìš©ëœë‹¤.

## â€¢ morgan  
â€£ morgan í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, ë‚´ê°€ ì„¤ì •í•œ ëŒ€ë¡œ middlewareë¥¼ return í•´ì¤€ë‹¤.  
â€£ morganì€ GET, path, status code ì´ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.  

## â€¢ Router
â€£ ì»¨íŠ¸ë¡¤ëŸ¬ì™€ URLì˜ ê´€ë¦¬ë¥¼ ì‰½ê²Œ í•´ì¤€ë‹¤.  
(= ë¯¸ë‹ˆ ì–´í”Œë¦¬ì¼€ì´ì…˜ ë§Œë“¤ì–´ ì¤Œ)


## â€¢ export
â€£ íŒŒì¼ì€ í•œ ê°€ì§€ default export ë°–ì— ê°€ì§ˆ ìˆ˜ ì—†ë‹¤.

## â€¢ pug
â€£ pugëŠ” í…œí”Œë¦¿ ì—”ì§„  
(= í…œí”Œë¦¿ì„ ì´ìš©í•´ ë·°ë¥¼ ë§Œë“œëŠ” ê±¸ ë„ì›€)  
â€£ íŒŒì¼ì„ ë°›ì•„ì„œ ëª¨ë‘ ì²´í¬í•˜ê³  ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.
â€£ ê¹”ë”í•œ htmlì„ ì‘ì„±í•˜ë„ë¡ í•´ì¤€ë‹¤.
â€£ ìš°ë¦¬ì˜ htmlì— ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
â€£ ìš°ë¦¬ê°€ ë°˜ë³µí•˜ì§€ ì•Šì•„ë„ í•œ íŒŒì¼ë¡œ ëª¨ë“  í…œí”Œë¦¿ì„ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë‹¤.
íƒœê·¸ë¥¼ ì“°ì§€ ì•Šì•„ë„ ë„ì–´ì“°ê¸°ì™€ íƒ­ìœ¼ë¡œ êµ¬ë¶„ ëœë‹¤.  
â€£ expressëŠ” ì´ë¯¸ í…œí”Œë¦¿ì„ ë Œë”ë§í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìœ¼ë¯€ë¡œ res.renderì„ ì´ìš©í•´ pug íŒŒì¼ì˜ ì´ë¦„ì„ ì „í•´ì£¼ë©´ ëœë‹¤.  
(-> const hi = (req,res) => res.render("íŒŒì¼ì´ë¦„"));  
â€£ server.jsì˜ @ì¤„ì„ í†µí•´ pugì˜ ê²½ë¡œ ì§€ì •í•´ì¤€ë‹¤.  
(= ë Œë”ë§í•  ë•Œ ì°¾ì•„ì•¼ í•  ê²½ë¡œ)    

ex) title pageTitle ì´ë ‡ê²Œ ì“°ë©´ ê·¸ëƒ¥ í…ìŠ¤íŠ¸ê°€ ë˜ì§€ë§Œ, title=pageTitleì´ë¼ ì“°ë©´ ë³€ìˆ˜ë¡œ ì¸ì‹  
(-> í•˜ì§€ë§Œ ë‹¤ë¥¸ textì™€ ì„ì–´ì„œ ì“¸ ë•ŒëŠ” #{pageTitle} ì‚¬ìš©)

## â€¢ Iteration  
â€£ elementsì˜ listë¥¼ ë³´ì—¬ì¤€ë‹¤.  
(each in ì´ëŸ°ê±°. ëŒ“ê¸€, ë¹„ë””ì˜¤ ë“± ë¦¬ìŠ¤íŠ¸ ë³´ì—¬ì¤„ ë•Œ ì‚¬ìš©)  
â€£ in ë‹¤ìŒì— ì˜¤ëŠ” ë³€ìˆ˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë³€ìˆ˜ ì´ë¦„ê³¼ ê°™ì•„ì•¼ í•œë‹¤.  

## â€¢ Mixin
â€£ mixinì€ partialì´ê¸´ í•œë° ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” partial  
(= ë˜‘ë˜‘í•œ partial)  
â€£ ë°˜ë³µí•´ì„œ ë“±ì¥í•˜ëŠ” HTML ë¸”ë¡ì´ í•„ìš”í•˜ê³ , ë¸”ë¡ í˜•íƒœë¥¼ ì§€ë‹ˆì§€ë§Œ ì„œë¡œ ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.

## â€¢ watch.pug  
â€£ watch.pugì˜ a(href="/edit") ì¤„ì—ì„œ, ê·¸ëƒ¥ editì„ ì“°ë©´ /videos/editìœ¼ë¡œ ì´ë™í•˜ê³ , /editì„ ì¨ì•¼ /editìœ¼ë¡œ ì´ë™í•œë‹¤.  
=> absoluteì™€ relative urlì˜ ì°¨ì´ì   
ì•ì— /ë¥¼ ë„£ìœ¼ë©´, ë‚´ê°€ ì–´ë””ë“  ìƒê´€ ì—†ì´ rootê²½ë¡œ + /edit,  
/ë¥¼ ì§€ìš°ë©´ relative urlì´ ëœë‹¤. (í˜„ì¬ ê²½ë¡œ ë’¤ì— /editì´ ë¶™ìŒ)    

ex) ì˜ˆë¥¼ ë“¤ì–´  a(href=`${video.id}/edit`)ë¼ê³  ì“°ë©´ localhost:4000/videos/3/edit ë¡œ ì´ë™í•˜ê³ , a(href=`/${video.id}/edit`)ë¼ê³  ì“°ë©´ localhost:4000/3/edit ë¡œ ì´ë™ 

(=> ê¸°ë³¸ê°’ìœ¼ë¡œ method="GET")  
â€£ GETì€ ì–¸ì œ ì“¸ê¹Œ?  
-> êµ¬ê¸€ì´ë‚˜ ë„¤ì´ë²„ì—ì„œ ë­”ê°€ë¥¼ ê²€ìƒ‰í•  ë•Œ, ê·¸ ê²€ìƒ‰ì–´ê°€ ì£¼ì†Œì°½ì— í¬í•¨ë˜ì–´ ìˆì„ ê±°ì„ (ë¹„ë””ì˜¤ ê²€ìƒ‰í•˜ê±°ë‚˜ í•  ë•Œ ì‚¬ìš©)
â€£ POSTëŠ” ì–¸ì œ ì“¸ê¹Œ?  
-> íŒŒì¼ ë³´ë‚´ê±°ë‚˜ databaseì— ìˆëŠ” ê°’ì„ ë°”ê¾¸ëŠ” ë­”ê°€ë¥¼ ë³´ë‚¼ ë•Œ ì‚¬ìš©  
(ì›¹ì‚¬ì´íŠ¸ì— ë¡œê·¸ì¸ í•  ë•Œë„ POST ì‚¬ìš©)  


## â€¢ edit.pug  
â€£ inputì— nameì„ ë„£ì–´ì£¼ì§€ ì•Šìœ¼ë©´ req.bodyì—ì„œ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ì—†ë‹¤.  

## â€¢ MongoDB  
â€£ ê°„ë‹¨í•˜ê²Œ ì‘ë™ì‹œí‚¬ ìˆ˜ ìˆê³  ì´ˆë³´ìë“¤ë„ ì‚¬ìš© ê°€ëŠ¥  
ë¬¸ì„œê¸°ë°˜ì´ë‹¤.(document-based database)
â€£ databaseë„ objectë¡œ ìƒê°í•œë‹¤.  
â€£ JSON-like-documentë¡œ ì €ì¥í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì´ˆì‹¬ìë“¤ë„ ì‚¬ìš©í•˜ê¸° ì‰½ë‹¤.  


## â€¢ Mongoose  
â€£ node.jsì™€ mongoDBë¥¼ ì´ì–´ì£¼ëŠ” ë‹¤ë¦¬ ì—­í•   
(javascriptë¡œ ì ìœ¼ë©´, mongooseê°€ mongoDBì—ê²Œ ì „ë‹¬í•´ì¤Œ)
â€£ mongoDBì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ mongoose ì‚¬ìš©

â€£ onê³¼ onceì˜ ì°¨ì´ì   
-> onì€ ì—¬ëŸ¬ë²ˆ ê³„ì† ë°œìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤. (í´ë¦­ê°™ì€ ì´ë²¤íŠ¸)  
->onceëŠ” ì˜¤ë¡œì§€ í•œë²ˆë§Œ ë°œìƒí•œë‹¤.  

## â€¢ callback 
â€£ ë¬´ì–¸ê°€ê°€ ë°œìƒí•˜ê³  ë‚œ ë‹¤ìŒ í˜¸ì¶œë˜ëŠ” functionì„ ë§í•œë‹¤.  
â€£ callbackì„ ì‚¬ìš©í•˜ë©´ ì•„ë¬´ê²ƒë„ return ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.  

ex) ì˜ˆë¥¼ ë“¤ì–´ ì•„ë˜ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´
```
export const home = (req, res) =>{
  console.log("One")
  Video.find({}, (error, videos) => {
    console.log("Two")
  });
    console.log("Three");
}
```
```  
One
Three
Two
``` 
ìœ„ì²˜ëŸ¼ ì¶œë ¥ì´ ë˜ëŠ” ê±¸ ë³´ì•„, callbackì€ íŠ¹ì • ì½”ë“œë¥¼ ë§ˆì§€ë§‰ì— ì‹¤í–‰ë˜ê²Œ í•  ìˆ˜ ìˆë‹¤. 
(= javascriptëŠ” ê¸°ë‹¤ë¦¬ëŠ” ê¸°ëŠ¥ì´ ì—†ë‹¤. ìœ„ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•œ ê±´ë° ì‘ì—…ë³„ë¡œ ì‹œê°„ì´ ë‹¬ë¼ì„œ ìˆœì„œê°€ ë°”ë€ŒëŠ” ê±°) 

## â€¢ promise 
â€£ callbackì˜ ìµœì‹  ë²„ì „ì´ë¼ ë³¼ ìˆ˜ ìˆë‹¤.  
â€£ awaitë¥¼ ì•ì— ì ìœ¼ë©´, findëŠ” ë‚´ê°€ callbackì„ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê±¸ ì•Œê²Œ ëœë‹¤.  
-> ë”°ë¼ì„œ findëŠ” ì°¾ì•„ë‚¸ ë¹„ë””ì˜¤ë¥¼ ë°”ë¡œ ì¶œë ¥í•´ì¤€ë‹¤.  

## â€¢ await  
â€£ awaitê°€ databaseë¥¼ ê¸°ë‹¤ë ¤ ì¤€ë‹¤.  
â€£ asyncì™€ awaitëŠ” javascriptê°€ ì–´ë””ì„œ ì–´ë–»ê²Œ ê¸°ë‹¤ë¦¬ëŠ”ì§€ ë°”ë¡œ ì•Œ ìˆ˜ ìˆë‹¤. 
â€£ ì½”ë“œ ê·œì¹™ìƒ awaitëŠ” function ì•ˆì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê³ , í•´ë‹¹ functionì´ asynchronousì¼ ë•Œë§Œ ê°€ëŠ¥í•˜ë‹¤.  
(=> ê·¸ë˜ì„œ ì•ì— asyncë¼ê³  ì¨ì¤Œ)
â€£ awaitì—ì„œ ì—ëŸ¬ê°€ ìƒê¸°ë©´ ë‹¤ ë‚ ì•„ê°€ ë²„ë¦¬ê³  ì•„ë¬´ê²ƒë„ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.  

## â€¢ create  
```
 const video = new Video({
        title,
        description,
        createAt: Date.now(),
        hashtags: hashtags.split(",").map((word) => `#${word}`),
        meta:{
            views:0,
            rating:0,
        },
    });
    await video.save();
    return res.redirect("/");
```
ìœ„ ì½”ë“œì™€ ì•„ë˜ ì½”ë“œì™€ ê°™ë‹¤.  
```
await Video.create({
        title,
        description,
        createAt: Date.now(),
        hashtags: hashtags.split(",").map((word) => `#${word}`),
        meta:{
            views:0,
            rating:0,
        },
    });
    return res.redirect("/");
})
```
-> ì•„ë˜ ì½”ë“œëŠ” ìœ„ ì½”ë“œì™€ ê¸°ëŠ¥ì€ ê°™ì§€ë§Œ javascript objectë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ìš°ë¦¬ê°€ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤. (ìë™ìœ¼ë¡œ í•´ì¤Œ)  
(=> ì¦‰, ë°©ì‹ì€ saveì™€ create ë°©ì‹ ë‘ ê°€ì§€ê°€ ìˆë‹¤.)  

## â€¢ maxLength, minLength  
â€£ upload.pugì˜ inputì˜ max/minLengthì€ ì‚¬ìš©ìë¥¼ ìœ„í•œ ê±°ê³ ,  
Video.jsì˜ max/minLengthëŠ” databaseë¥¼ ìœ„í•œ ê±°ë¡œ ë‘˜ ë‹¤ í•´ì¤˜ì•¼ í•œë‹¤.  

## â€¢ exists  
â€£ videoControlller.jsì˜ postEdit ë¶€ë¶„ì˜ findByIdë¥¼ existsë¡œ ë³€ê²½  
( => video objectë¥¼ ë°›ëŠ” ëŒ€ì‹  true, falseë¥¼ ë°›ê² ë‹¤ëŠ” ê²ƒ) 
-> postEditì—ì„œëŠ” ë‹¨ìˆœíˆ ì˜ìƒì´ ì¡´ì¬í•˜ëŠ”ì§€ë§Œ í™•ì¸í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— existsë¡œ idë¥¼ ë°›ì§€ ì•Šê³ , filterë¥¼ ë°›ì•„ ì¡´ì¬ ì—¬ë¶€ë¥¼ íŒë‹¨í•œë‹¤.     
â€£ ê·¸ëŸ¼ getEditë„ existsë¡œ ë°›ëŠ”ê²Œ ì¢‹ì„ê¹Œ?  
-> getEditì€ objectë¥¼ í†µí•´ edit templateë¡œ ë³´ë‚´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì— video objectê°€ í•„ìš”í•˜ë¯€ë¡œ findById()ê°€ ë” ì í•©í•˜ë‹¤.  

## â€¢ middleware  
â€£ middlewareëŠ” ë¬´ì¡°ê±´ modelì´ ìƒì„±ë˜ê¸° ì „ì— ë§Œë“¤ì–´ì•¼ í•œë‹¤.    

## â€¢ db ë‚´ìš© ì‚­ì œ
-> [cmd]  
â€£  mongosh  
â€£  use wetube  
â€£  db.videos.remove({})  

form ë‚´ìš©ì€ req.body
idëŠ” req.params 
URLì˜ ì •ë³´ëŠ” req.query

## schema  
â€£ schemaëŠ” validationì„ ìœ„í•œ ëª¨ë“  ê²ƒ 
â€£ static functionê³¼ middlewareë¥¼ ìƒì„±í•´ì„œ ì“¸ ìˆ˜ ìˆë‹¤.
